"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const tslib_1 = require("tslib");
const path = require("path");
const fs_1 = require("@ionic/cli-framework/utils/fs");
const shell_1 = require("./utils/shell");
function sendMessage({ config, meta }, msg) {
    return tslib_1.__awaiter(this, void 0, void 0, function* () {
        const fd = yield fs_1.fsOpen(path.resolve(config.directory, 'helper.log'), 'a');
        const p = yield shell_1.forkcmd(meta.binPath, ['_', '--no-interactive'], { stdio: ['ignore', fd, fd, 'ipc'] });
        p.send(msg);
        p.disconnect();
        p.unref();
    });
}
exports.sendMessage = sendMessage;
